<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        
    <title>DungBu • Project</title>
    <link rel="shortcut icon" href="./img/logo/favicon.png" type="image/x-icon">

    <!-- CSS Chung -->
    <link rel="stylesheet" href="./css/style.css">
    <!-- CSS Project -->
    <link rel="stylesheet" href="./css/project.css">

    <!-- //////////// //////////// //////////// //////////// //////////// //////////// -->
    <!-- jQuery library -->
    <script src="./lib/jQuery-3.5.1/jquery-3.5.1.js"></script>
    <!-- jQuery Ui library -->
    <script src="./lib/jQueryUi-1.3.1.1/jquery-ui.js"></script>
    <!-- ImagesLoaded library -->
    <script src="./lib/ImagesLoaded-4.1.2/imagesloaded.pkgd.min.js"></script>
    <!-- Isotope library -->
    <script src="./lib/Isotope/isotope.pkgd.min.js"></script>
    <!-- //////////// //////////// //////////// //////////// //////////// //////////// -->
  </head>


  <body>
    
    <div w3-include-HTML="./module/body.html"></div>

    <section id="sectionProject">
      <div class="title">
        <h2>project</h2>
        <div class="button-group filter-button-group">
          <button class="button" data-filter="*">All</button>
          <button class="button" data-filter=".weblandingpage">Web . Landing page</button>
          <button class="button" data-filter=".powerpoint">Powerpoint</button>
          <button class="button" data-filter=".motiongraphic">
            <a href="https://dungbubu.com/youtube" target="_blank">Motion graphic</a>
          </button>
        </div>
      </div>

      <div class="grid">
        <div class="grid-sizer"></div>
        <div class="gutter-sizer"></div>
      </div>
    </section>


    <!-- //////////// //////////// //////////// //////////// //////////// //////////// -->
    <script src="./js/includeHTML.js"></script>
    <script src="./js/index.js"></script>
    <script src="./js/listProject.js"></script>
    <!-- //////////// //////////// //////////// //////////// //////////// //////////// -->


    <script>
      // Import List Project rồi Render ra HTML
      var html = '';
      list_project.forEach(function(item) {
        html += `<div class="grid-item `+item.class+`" loading="lazy">
                  <img src="`+item.url+`" alt="`+item.name+` `+item.type+`">
                  <div class="content">
                    <h4 class="name">`+item.name+`</h4>
                    <p class="type">`+item.type+`</p>
                  </div>
                </div>`;
      });
      $('.grid').append(html);


      // Content cho Watermark
      function watermarkContent() {
        $('.watermark').append('<h1>dungbubu</h1>');
      }


      // Hàm cắt HashID để lọc
      function getHashFilter() {
        var matches = location.hash.match( /filter=([^&]+)/i );
        var hashFilter = matches && matches[1];
        return hashFilter && decodeURIComponent( hashFilter );
      }


      // Hàm chạy thư viện ImagesLoaded > Isotope > Masonry
      var $grid = $('.grid').imagesLoaded( function() {
        $grid.isotope({
          itemSelector: '.grid-item',
          stagger: 20,
          percentPosition: true,
          masonry: {columnWidth: '.grid-sizer', gutter: '.gutter-sizer'},
        });
      });


      // Thay đổi HashID khi click filter button
      var $filters = $('.filter-button-group').on( 'click', 'button', function() {
        var filterAttr = $(this).attr('data-filter');
        // Đặt filter vào HashID
        location.hash = 'filter=' + encodeURIComponent( filterAttr );
      });


      // Filter theo HashID
      var isIsotopeInit = false;
      function onHashchange() {
        var hashFilter = getHashFilter();
        if ( !hashFilter && isIsotopeInit ) {return; }
        isIsotopeInit = true;
        // Filter isotope theo HashID
        $grid.isotope({
          itemSelector: '.grid-item',
          filter: hashFilter
        });
        // Hàm kiểm tra và thêm trạng thái Click cho các button
        if ( hashFilter ) {
          $filters.find('.is-checked').removeClass('is-checked');
          $filters.find('[data-filter="' + hashFilter + '"]').addClass('is-checked');
        }
      }


      // Thay đổi và cập nhật HashID
      $(window).on( 'hashchange', onHashchange );
      onHashchange();
  
      
      // Hàm tạo hiệu ứng click để phóng to ảnh trong List Project
      $('.grid').on('click','.grid-item', function() {
        $(this).toggleClass('grid-item-active');
        $grid.isotope();
      });
    </script>
  </body>
</html>